il.MultiLineNewInputGUI={add:function(a){var b=this.clone_template.clone();this.init(b),a.after(b),this.update(a.parent())},addFirstLine:function(){this.add_first_line.hide();var a=this.clone_template.clone();this.init(a),this.add_first_line.parent().parent().children().eq(1).append(a),this.update(this.add_first_line.parent().parent().children().eq(1))},add_first_line:null,cached_options:[],cacheOptions(a,b,c){this.cached_options.push({type:b,options:c}),a.attr("data-cached_options_id",this.cached_options.length-1)},clone_template:null,down:function(a){a.insertAfter(a.next()),this.update(a.parent())},init:function(a,b){$("span[data-action]",a).each(function(b,c){c=$(c),c.off(),c.on("click",this[c.data("action")].bind(this,a))}.bind(this)),b?this.add_first_line=a:($(".input-group.date:not([data-cached_options_id])",a).each(function(a,b){b=$(b),b.data("DateTimePicker")&&this.cacheOptions(b,"datetimepicker",b.datetimepicker("options"))}.bind(this)),$("select[data-multipleselectnewinputgui]:not([data-cached_options_id])",a).each(function(a,b){b=$(b);const c=JSON.parse(atob(b.data("multipleselectnewinputgui")));this.cacheOptions(b,"select2",c)}.bind(this)),!this.clone_template&&(this.clone_template=a.clone(),$("[name]",this.clone_template).each(function(a,b){"checkbox"===b.type?b.checked=!1:b.value=""}),$(".alert",this.clone_template).remove(),this.clone_template.show(),$("select[data-multipleselectnewinputgui]",this.clone_template).each(function(a,b){b=$(b),b.html("")}.bind(this)),a.parent().parent().data("remove_first_line")&&this.remove(a)))},remove:function(a){var b=a.parent();(!b.parent().data("required")||1<b.children().length)&&(a.remove(),this.update(b))},up:function(a){a.insertBefore(a.prev()),this.update(a.parent())},update:function(a){$("span[data-action=up]",a).show(),$("> div:first-of-type span[data-action=up]",a).hide(),$("span[data-action=down]",a).show(),$("> div:last-of-type span[data-action=down]",a).hide();for(const b of["aria-controls","aria-labelledby","href","id","name"])a.children().each(function(a,c){$("["+b+"]",c).each(function(c,d){for(const[e,f]of[["[","]["],["__","__"]])d.attributes[b].value=d.attributes[b].value.replace(new RegExp(e.replace(/./g,"\\$&")+"[0-9]+"+f.replace(/./g,"\\$&")),e+a+f)}.bind(this))}.bind(this));a.parent().data("required")?2>a.children().length?$("span[data-action=remove]",a).hide():$("span[data-action=remove]",a).show():($("span[data-action=remove]",a).show(),0===a.children().length&&this.add_first_line.show()),$("[data-cached_options_id]",a).each(function(a,b){b=$(b);const c=this.cached_options[b.attr("data-cached_options_id")];if(c)switch(c.type){case"datetimepicker":b.data("DateTimePicker")&&b.datetimepicker("destroy"),b.prop("id",""),b.datetimepicker(c.options);break;case"select2":b.data("select2")&&b.select2("destroy"),b.next(".select2").remove(),b.removeAttr("class"),b.removeAttr("data-select2-id"),b.removeAttr("aria-hidden"),b.removeAttr("tabindex"),b.select2(c.options);break;default:}}.bind(this))}};
