(()=>{function a(a){return a instanceof HTMLInputElement&&"text"===a.type&&a.classList.contains("form-control")}function b(a){a._init_textinput||(a._init_textinput=!0,a.dataset.autocomplete_url&&($.widget("custom.iladvancedautocomplete",$.ui.autocomplete,{more:!1,_renderMenu:(b,c)=>{const d=$(a).iladvancedautocomplete("instance");for(const a of c)d._renderItemData(b,a);d.options.requestUrl.searchParams.delete("fetchall"),d.more&&(b.append(`<li class='ui-menu-category ui-menu-more ui-state-disabled'><span>&raquo;${il.textinput_more_txt}</span></li>`),b.find("li").last().on("click",a=>{d.options.requestUrl.searchParams.append("fetchall","1"),d.close(a),d.search(null,a),a.preventDefault()}))}}),$(a).iladvancedautocomplete({requestUrl:new URL(a.dataset.autocomplete_url,location.href),source:async(b,c)=>{const d=$(a).iladvancedautocomplete("instance"),e=new URL(d.options.requestUrl);e.searchParams.append("term",b.term);const f=await(await fetch(e)).json();"undefined"==typeof f.items?(d.more=!1,c(f)):(d.more=f.hasMoreResults,c(f.items))},minLength:0})))}if(!il.int_textinput_observer){il.int_textinput_observer=!0;const c=new MutationObserver(c=>{for(const d of c)for(const c of d.addedNodes)if(c instanceof Element)for(const d of[c,...c.querySelectorAll("*")])a(d)&&b(d)});c.observe(document.documentElement,{childList:!0,subtree:!0})}})();
