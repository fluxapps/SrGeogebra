(function(a){a.fn.extend({multi_line_input:function(b,c){var d=a.extend({unique_values:!1},c),b=b,e=this,f=this,g=0,h=a(this).find(".multi_input_line").first(),i=function(b){var c=b.find(".multi_icons_wrapper").last().width();b.find(".ml-input").each(function(){c+=a(this).width()}),c-=b.find(".ml-input").last().width(),b.find(".ml-input").last().width(b.width()-c-100)};a(this).find(".multi_input_line").each(function(){i(a(this))});(function(b){b.hide(),b.removeClass("multi_input_line"),b.find("textarea[name^='"+e.attr("id")+"'], input[name^='"+e.attr("id")+"'], select[name^='"+e.attr("id")+"']").each(function(){var b=a(this).attr("name"),c=e.attr("id"),d=new RegExp("^"+c+"[[0-9]+](.*)$","g"),f=d.exec(b);b="empty["+g+"]"+f[1],a(this).attr("name",b)})})(h);var j=function(b,d){var d=d||!1,f=b;a(b).find(".add_button").on("click",function(){var b=h.clone();return b.show(),a(b).addClass("multi_input_line"),j(b),f.after(b),a(e).change(),a(document).trigger("multi_line_add_button",[f,b]),a(b).find("textarea, input[type='text']").focus(),!1}),a(b).find(".up_button").on("click",function(){return a(this).parents(".multi_input_line").insertBefore(a(this).parents(".multi_input_line").prev()),!1}),a(b).find(".down_button").on("click",function(){return a(this).parents(".multi_input_line").insertAfter(a(this).parents(".multi_input_line").next()),!1}),a(b).find(".remove_button").on("click",function(){return f.remove(),a(e).change(),a(document).trigger("multi_line_remove_button",f),!1});var i=f.find(".date");0<i.length&&i.datetimepicker(c.date_config),d||f.find("textarea[name^='empty'], input[name^='empty'], select[name^='empty']").each(function(){var b=a(this).attr("name"),c=e.attr("id"),d=/^empty[[0-9]+](.*)$/g,f=d.exec(b);b=c+"["+g+"]"+f[1],a(this).attr("name",b)}),g++};return a(this).find(".multi_input_line").each(function(){j(a(this),!0)}),a(e).change(),e}})})(jQuery);